<!DOCTYPE html>
<html lang="da">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SS -</title>
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="https://use.typekit.net/wyt4gfe.css">
</head>

<body>
  <div id="main_container">
    <div id="nav_bg"></div>
    <header>
      <nav>
        <a href="#" id="link-forside0" class="p-action-click">
          <div id="nav1">
            <p>secondhand <br>sunday</p>
          </div>
        </a>
        <div id="nav2" class="p-action-click">
          <a href="#" id="link-forside1">Forside</a>
          <div class="dropdown_wrap">
            <a href="#" id="link-produkter1" class="show">Produkter</a>
            <div class="dropdown">
              <a href="#" id="link-alle1">Alle</a>
              <a href="#" id="link-jakker1">Jakker</a>
              <a href="#" id="link-kjoler1">Kjoler</a>
              <a href="#" id="link-toppe1">Toppe</a>
            </div>
          </div>
          <a href="#" id="link-om_os1">Om os</a>
          <a href="#">Kurv</a>
          <div id="burger"></div>
        </div>
        <div id="nav3" class="p-action-click">
          <a href="#" id="link-forside2">Forside</a>
          <a href="#" id="link-produkter2">Produkter</a>
          <a href="#" id="link-alle2" class="under_kategori">Alle</a>
          <a href="#" id="link-jakker2" class="under_kategori">Jakker</a>
          <a href="#" id="link-kjoler2" class="under_kategori">Kjoler</a>
          <a href="#" id="link-toppe2" class="under_kategori">Toppe</a>
          <a href="#" id="link-om_os2">Om os</a>
          <a href="#">Kurv</a>
        </div>
      </nav>
    </header>
    <div class="spacing1"></div>
    <section id="lightbox_section">
      <div id="popup">
        <div class="ret_popup">
          <div class="img_detail_wrap">
            <div class="img_overlay img_overlay2"></div>
            <div id="popup_billede" class="p-action-click">
            </div>
          </div>
          <div class="tekst_detail_wrap">
            <div id="popup_tekst">
              <h2 id="popup_navn"></h2>
              <p id="popup_lang"></p>
            </div>
            <div class="pris_button_wrap">
              <h3 id="popup_pris"></h3>
              <div>
                <button class="p-action-click" id="popup_button_tilbage">Tilbage</button>
                <button class="p-action-click" id="popup_button_kurv">Læg i kurv</button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
    <footer>
      <h2>©Secondhand Sunday - Feb 2020</h2>
      <p>Fashionstrædet 12</p>
      <p>2200 København N</p>
      <p>TEL: XXXXXX</p>
      <p>SS@gmail.com</p>
    </footer>
  </div>
  <main id="intro_holder"></main>
  <!--<div id="loading_wrap">
  <div id="loading_inner">
    <div id="logo_container"></div>
    <div id="loader">
      <div class="square square1 square1_ani"></div>
      <div class="square square2 square2_ani"></div>
      <div class="square square3 square3_ani"></div>
    </div>
  </div>
</div>-->
  <script src="intro_outro.js"></script>
  <script src="pointer.js"></script>
  <script>
    const urlParams = new URLSearchParams(window.location.search);
    const id = urlParams.get("id");
    let endpoint = "https://spreadsheets.google.com/feeds/list/1AdgP4T0S2sqYOZNl3aHq_vHGg7hOj5ulN23DWNIHV48/2/public/values?alt=json";
    let retter = [];
    let popUp = document.querySelector("#popup");

    document.addEventListener("DOMContentLoaded", start);

    function start() {
      console.log("start");


      let retter = []
      hentJSON();
    }

    async function hentJSON() {
      console.log("hent json");

      const response = await fetch(endpoint);
      retter = await response.json();
      visRetter();
    }

    function visRetter() {
      console.log("visRetter");
      let dataFill = document.querySelector("#data_fill");
      let template = document.querySelector("#template");

      retter.feed.entry.forEach(element => {
        if (element.gsx$id.$t == id) {
          popUp.querySelector(".ret_popup #popup_billede").style.backgroundImage = `url(img/${element.gsx$billede.$t}.jpg)`;
          popUp.querySelector(".ret_popup #popup_navn").textContent = `${element.gsx$navn.$t}`;
          popUp.querySelector(".ret_popup #popup_lang").textContent = `${element.gsx$lang.$t}`;
          popUp.querySelector(".ret_popup #popup_pris").textContent = `Pris: ${element.gsx$pris.$t},-`;
        }
        document.querySelector("head title").textContent = `SS - ${element.gsx$navn.$t}`;
      });
    }

    document.querySelector("#popup_button_tilbage").addEventListener("click", () => {
      let tilbageHref = `produkter.html?kategori=alle`;
      startAniIn();
      setTimeout(function() {
        location.href = tilbageHref;
      }, 600);
    });









    startAniOut();

    document.querySelector("#link-forside0").addEventListener("click", () => {
      startAniIn();
      setTimeout(function() {
        location.href = "index.html"
      }, 600);
    });
    document.querySelector("#link-forside1").addEventListener("click", () => {
      startAniIn();
      setTimeout(function() {
        location.href = "index.html"
      }, 600);
    });
    document.querySelector("#link-produkter1").addEventListener("click", () => {
      startAniIn();
      setTimeout(function() {
        location.href = "produkter.html?kategori=alle"
      }, 600);
    });
    document.querySelector("#link-alle1").addEventListener("click", () => {
      startAniIn();
      setTimeout(function() {
        location.href = "produkter.html?kategori=alle"
      }, 600);
    });
    document.querySelector("#link-jakker1").addEventListener("click", () => {
      startAniIn();
      setTimeout(function() {
        location.href = "produkter.html?kategori=jakker"
      }, 600);
    });
    document.querySelector("#link-kjoler1").addEventListener("click", () => {
      startAniIn();
      setTimeout(function() {
        location.href = "produkter.html?kategori=kjoler"
      }, 600);
    });
    document.querySelector("#link-toppe1").addEventListener("click", () => {
      startAniIn();
      setTimeout(function() {
        location.href = "produkter.html?kategori=toppe"
      }, 600);
    });
    document.querySelector("#link-om_os1").addEventListener("click", () => {
      startAniIn();
      setTimeout(function() {
        location.href = "om_os.html"
      }, 600);
    });
    document.querySelector("#link-forside2").addEventListener("click", () => {
      startAniIn();
      setTimeout(function() {
        location.href = "index.html"
      }, 600);
    });
    document.querySelector("#link-produkter2").addEventListener("click", () => {
      startAniIn();
      setTimeout(function() {
        location.href = "produkter.html?kategori=alle"
      }, 600);
    });
    document.querySelector("#link-alle2").addEventListener("click", () => {
      startAniIn();
      setTimeout(function() {
        location.href = "produkter.html?kategori=alle"
      }, 600);
    });
    document.querySelector("#link-jakker2").addEventListener("click", () => {
      startAniIn();
      setTimeout(function() {
        location.href = "produkter.html?kategori=jakker"
      }, 600);
    });
    document.querySelector("#link-kjoler2").addEventListener("click", () => {
      startAniIn();
      setTimeout(function() {
        location.href = "produkter.html?kategori=kjoler"
      }, 600);
    });
    document.querySelector("#link-toppe2").addEventListener("click", () => {
      startAniIn();
      setTimeout(function() {
        location.href = "produkter.html?kategori=toppe"
      }, 600);
    });
    document.querySelector("#link-om_os2").addEventListener("click", () => {
      startAniIn();
      setTimeout(function() {
        location.href = "om_os.html"
      }, 600);
    });









    document.querySelector("#burger").addEventListener("click", menuDown);

    function menuDown() {
      document.querySelector("#burger").classList.remove("burger_up");
      document.querySelector("#burger").classList.add("burger_down");
      document.querySelector("#nav_bg").classList.remove("burger_up");
      document.querySelector("#nav_bg").classList.add("burger_down");
      document.querySelector("#nav3").classList.remove("burger_up");
      document.querySelector("#nav3").classList.add("burger_down");


      document.querySelector("#burger").removeEventListener("click", menuDown);
      document.querySelector("#burger").addEventListener("click", menuUp);
      document.querySelector("#nav_bg").addEventListener("click", menuUp);
    }

    function menuUp() {
      document.querySelector("#burger").classList.remove("burger_down");
      document.querySelector("#burger").classList.add("burger_up");
      document.querySelector("#nav_bg").classList.remove("burger_down");
      document.querySelector("#nav_bg").classList.add("burger_up");
      document.querySelector("#nav3").classList.remove("burger_down");
      document.querySelector("#nav3").classList.add("burger_up");


      document.querySelector("#nav_bg").removeEventListener("click", menuUp);
      document.querySelector("#burger").removeEventListener("click", menuUp);
      document.querySelector("#burger").addEventListener("click", menuDown);
    }

    init_pointer({

    })

  </script>
</body>

</html>
