<!DOCTYPE html>
<html lang="da">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SS -</title>
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="https://use.typekit.net/wyt4gfe.css">
</head>

<body>
  <div id="main_container">
    <div id="nav_bg"></div>
    <header>
      <nav>
        <a href="index.html">
          <div id="nav1"></div>
        </a>
        <div id="nav2" class="p-action-click">
          <a href="index.html">Forside</a>
          <div class="dropdown_wrap">
            <a href="produkter.html?kategori=alle" class="show">Produkter</a>
            <div class="dropdown">
              <a href="produkter.html?kategori=alle">Alle</a>
              <a href="produkter.html?kategori=jakker">Jakker</a>
              <a href="produkter.html?kategori=kjoler">Kjoler</a>
              <a href="produkter.html?kategori=toppe">Toppe</a>
            </div>
          </div>
          <a href="om_os.html">Om os</a>
          <a href="#">Kurv</a>
          <div id="burger"></div>
        </div>
        <div id="nav3">
          <a href="index.html">Forside</a>
          <a href="produkter.html?kategori=alle">Produkter</a>
          <a href="produkter.html?kategori=alle" class="under_kategori">Alle</a>
          <a href="produkter.html?kategori=jakker" class="under_kategori">Jakker</a>
          <a href="produkter.html?kategori=kjoler" class="under_kategori">Kjoler</a>
          <a href="produkter.html?kategori=toppe" class="under_kategori">Toppe</a>
          <a href="om_os.html">Om os</a>
          <a href="#">Kurv</a>
        </div>
      </nav>
    </header>
    <div class="spacing1"></div>
    <section id="lightbox_section">
      <div id="popup">
        <div class="ret_popup">
          <div class="img_detail_wrap">
            <div class="img_overlay img_overlay2"></div>
            <div id="popup_billede" class="p-action-click">
            </div>
          </div>
          <div class="tekst_detail_wrap">
            <div id="popup_tekst">
              <h2 id="popup_navn"></h2>
              <p id="popup_lang"></p>
            </div>
            <div class="pris_button_wrap">
              <h3 id="popup_pris"></h3>
              <div>
                <button class="p-action-click" id="popup_button_tilbage">Tilbage</button>
                <button class="p-action-click" id="popup_button_kurv">Læg i kurv</button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
    <footer>
      <h2>©Secondhand Sunday - Feb 2020</h2>
      <p>Fashionstrædet 12</p>
      <p>2200 København N</p>
      <p>TEL: XXXXXX</p>
      <p>SS@gmail.com</p>
    </footer>
  </div>


  <script src="pointer.js"></script>
  <script>
    const urlParams = new URLSearchParams(window.location.search);
    const id = urlParams.get("id");
    let endpoint = "https://spreadsheets.google.com/feeds/list/1AdgP4T0S2sqYOZNl3aHq_vHGg7hOj5ulN23DWNIHV48/2/public/values?alt=json";
    let retter = [];
    let popUp = document.querySelector("#popup");

    document.addEventListener("DOMContentLoaded", start);

    function start() {
      console.log("start");


      let retter = []
      hentJSON();
    }

    async function hentJSON() {
      console.log("hent json");

      const response = await fetch(endpoint);
      retter = await response.json();
      visRetter();
    }

    function visRetter() {
      console.log("visRetter");
      let dataFill = document.querySelector("#data_fill");
      let template = document.querySelector("#template");

      retter.feed.entry.forEach(element => {
        if (element.gsx$id.$t == id) {
          popUp.querySelector(".ret_popup #popup_billede").style.backgroundImage = `url(img/${element.gsx$billede.$t}.jpg)`;
          popUp.querySelector(".ret_popup #popup_navn").textContent = `${element.gsx$navn.$t}`;
          popUp.querySelector(".ret_popup #popup_lang").textContent = `${element.gsx$lang.$t}`;
          popUp.querySelector(".ret_popup #popup_pris").textContent = `Pris: ${element.gsx$pris.$t},-`;
        }
        document.querySelector("head title").textContent = `SS - ${element.gsx$navn.$t}`;
      });
    }

    document.querySelector("button").addEventListener("click", () => {
      location.href = `produkter.html?kategori=alle`;
    });




    document.querySelector("#burger").addEventListener("click", menuDown);

    function menuDown() {
      document.querySelector("#burger").classList.remove("burger_up");
      document.querySelector("#burger").classList.add("burger_down");
      document.querySelector("#nav_bg").classList.remove("burger_up");
      document.querySelector("#nav_bg").classList.add("burger_down");
      document.querySelector("#nav3").classList.remove("burger_up");
      document.querySelector("#nav3").classList.add("burger_down");


      document.querySelector("#burger").removeEventListener("click", menuDown);
      document.querySelector("#burger").addEventListener("click", menuUp);
      document.querySelector("#nav_bg").addEventListener("click", menuUp);
    }

    function menuUp() {
      document.querySelector("#burger").classList.remove("burger_down");
      document.querySelector("#burger").classList.add("burger_up");
      document.querySelector("#nav_bg").classList.remove("burger_down");
      document.querySelector("#nav_bg").classList.add("burger_up");
      document.querySelector("#nav3").classList.remove("burger_down");
      document.querySelector("#nav3").classList.add("burger_up");


      document.querySelector("#nav_bg").removeEventListener("click", menuUp);
      document.querySelector("#burger").removeEventListener("click", menuUp);
      document.querySelector("#burger").addEventListener("click", menuDown);
    }

    init_pointer({

    })

  </script>
</body>

</html>
